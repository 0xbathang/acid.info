"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.useSearch = void 0;
const react_1 = require("react");
const useSearchContextPath_1 = require("./useSearchContextPath");
const useSearch = () => {
    const { createSearchInstance } = window;
    const searchContextPath = (0, useSearchContextPath_1.useSearchContextPath)();
    const [loaded, setLoaded] = (0, react_1.useState)(false);
    const search = (0, react_1.useRef)(null);
    const init = async () => {
        search.current = await createSearchInstance({
            resultsLimit: 50,
            preferredVersionPath: searchContextPath[0],
            searchContextByPaths: searchContextPath[1],
        });
        await search.current.init();
        setLoaded(true);
    };
    (0, react_1.useEffect)(() => {
        setLoaded(false);
        init();
    }, [searchContextPath[0], searchContextPath[1]]);
    return {
        loaded,
        query: async (input) => await search.current.query(input),
    };
};
exports.useSearch = useSearch;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9jbGllbnQvdGhlbWUvU2VhcmNoQmFyL2hvb2tzL3VzZVNlYXJjaC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSxpQ0FBbUQ7QUFDbkQsaUVBQTZEO0FBRXRELE1BQU0sU0FBUyxHQUFHLEdBQUcsRUFBRTtJQUM1QixNQUFNLEVBQUUsb0JBQW9CLEVBQUUsR0FBRyxNQUFhLENBQUE7SUFFOUMsTUFBTSxpQkFBaUIsR0FBRyxJQUFBLDJDQUFvQixHQUFFLENBQUE7SUFFaEQsTUFBTSxDQUFDLE1BQU0sRUFBRSxTQUFTLENBQUMsR0FBRyxJQUFBLGdCQUFRLEVBQUMsS0FBSyxDQUFDLENBQUE7SUFDM0MsTUFBTSxNQUFNLEdBQUcsSUFBQSxjQUFNLEVBQU0sSUFBSSxDQUFDLENBQUE7SUFFaEMsTUFBTSxJQUFJLEdBQUcsS0FBSyxJQUFJLEVBQUU7UUFDdEIsTUFBTSxDQUFDLE9BQU8sR0FBRyxNQUFNLG9CQUFvQixDQUFDO1lBQzFDLFlBQVksRUFBRSxFQUFFO1lBQ2hCLG9CQUFvQixFQUFFLGlCQUFpQixDQUFDLENBQUMsQ0FBQztZQUMxQyxvQkFBb0IsRUFBRSxpQkFBaUIsQ0FBQyxDQUFDLENBQUM7U0FDM0MsQ0FBQyxDQUFBO1FBRUYsTUFBTSxNQUFNLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRSxDQUFBO1FBRTNCLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQTtJQUNqQixDQUFDLENBQUE7SUFFRCxJQUFBLGlCQUFTLEVBQUMsR0FBRyxFQUFFO1FBQ2IsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFBO1FBRWhCLElBQUksRUFBRSxDQUFBO0lBQ1IsQ0FBQyxFQUFFLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxDQUFDLEVBQUUsaUJBQWlCLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO0lBRWhELE9BQU87UUFDTCxNQUFNO1FBQ04sS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFhLEVBQUUsRUFBRSxDQUFDLE1BQU0sTUFBTSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDO0tBQ2xFLENBQUE7QUFDSCxDQUFDLENBQUE7QUE5QlksUUFBQSxTQUFTLGFBOEJyQiIsImZpbGUiOiJjbGllbnQvdGhlbWUvU2VhcmNoQmFyL2hvb2tzL3VzZVNlYXJjaC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgdXNlU2VhcmNoQ29udGV4dFBhdGggfSBmcm9tICcuL3VzZVNlYXJjaENvbnRleHRQYXRoJ1xuXG5leHBvcnQgY29uc3QgdXNlU2VhcmNoID0gKCkgPT4ge1xuICBjb25zdCB7IGNyZWF0ZVNlYXJjaEluc3RhbmNlIH0gPSB3aW5kb3cgYXMgYW55XG5cbiAgY29uc3Qgc2VhcmNoQ29udGV4dFBhdGggPSB1c2VTZWFyY2hDb250ZXh0UGF0aCgpXG5cbiAgY29uc3QgW2xvYWRlZCwgc2V0TG9hZGVkXSA9IHVzZVN0YXRlKGZhbHNlKVxuICBjb25zdCBzZWFyY2ggPSB1c2VSZWY8YW55PihudWxsKVxuXG4gIGNvbnN0IGluaXQgPSBhc3luYyAoKSA9PiB7XG4gICAgc2VhcmNoLmN1cnJlbnQgPSBhd2FpdCBjcmVhdGVTZWFyY2hJbnN0YW5jZSh7XG4gICAgICByZXN1bHRzTGltaXQ6IDUwLFxuICAgICAgcHJlZmVycmVkVmVyc2lvblBhdGg6IHNlYXJjaENvbnRleHRQYXRoWzBdLFxuICAgICAgc2VhcmNoQ29udGV4dEJ5UGF0aHM6IHNlYXJjaENvbnRleHRQYXRoWzFdLFxuICAgIH0pXG5cbiAgICBhd2FpdCBzZWFyY2guY3VycmVudC5pbml0KClcblxuICAgIHNldExvYWRlZCh0cnVlKVxuICB9XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBzZXRMb2FkZWQoZmFsc2UpXG5cbiAgICBpbml0KClcbiAgfSwgW3NlYXJjaENvbnRleHRQYXRoWzBdLCBzZWFyY2hDb250ZXh0UGF0aFsxXV0pXG5cbiAgcmV0dXJuIHtcbiAgICBsb2FkZWQsXG4gICAgcXVlcnk6IGFzeW5jIChpbnB1dDogc3RyaW5nKSA9PiBhd2FpdCBzZWFyY2guY3VycmVudC5xdWVyeShpbnB1dCksXG4gIH1cbn1cbiJdfQ==
